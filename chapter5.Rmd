--- 
title_meta  : Chapter 5
title       : Data Frames
description : Most data sets you will be working with will be stored as a data frame. By the end of this chapter, you will be able to create a data frame, select interesting parts of a data frame and order a data frame according to certain variables.
attachments : 
  slides_link: https://s3.amazonaws.com/assets.datacamp.com/course/introduction_to_r/slides/ch6_slides.pdf

--- type:VideoExercise lang:r xp:50 skills:1 key:d4bde604ab
## Explore the Data Frame

*** =video_link
//player.vimeo.com/video/138173996

*** =video_hls
//videos.datacamp.com/transcoded/732_intro_to_r/v1/hls-ch6_1.master.m3u8


--- type:NormalExercise lang:r xp:100 skills:1 key:5c5feafab0
## Présentation de la "Data Frame"

Selon le chapitre précédent, une matrice peut contenir des éléments de même type. C'était le cas des données de Star Wars qui avaient seulemnt des éléments numériques.
Cependant, dans d'autres enquêtes, il est souvent possible d'avoir des informations de types:
- "êtes-vous marié?" ou des question de type "Vrais/faux" (boolien)
- "quel est votre opignon sur un produit?" (chaîne de cacractère)
- "donner un niveau d'appéciation à un service" (facteurs à plusieurs niveaux)

Les données issues de ces trois questions sont de types différentes. Sachant d'une matrice ne peut contenir d'un seul type de donnée, comment va-t-on stocker ces données pour les analyser?
l'avantage de la Data Frame, c'est qu'elle accepte plusieurs types de variables.
Chaque variable est montée dans une colonne et les lignes vont contenir les observations.
Au final une data frame est un tableau à plusieurs variables de types différents.
D'une manière générale, les tableaux importés d'autre logiciels (SAS, SPSS, Excel) sont des data frame.



*** =instructions

1. Cliquer sur  "Submit Answer" et observer à la console l'example de data frame.

*** =hint
Juste cliquer sur "Run"!

*** =sample_code
```{r eval=FALSE}
# Exemple de données sous forme de data frame
mtcars 
```

*** =solution
```{r eval=FALSE}
# Exemple de données sous forme de data frame
```

*** =sct
```{r eval=FALSE}
DM.result <- TRUE
success_msg("Passez à l'exercice suivant")
```

*** =pre_exercise_code
```{r eval=FALSE}

```


--- type:NormalExercise lang:r xp:100 skills:1 key:d4ddcf9a7d
## Consulter votre Data Frame (1)

Il est commun de travailler avec une lage série de donnée. Si vous avez un tableau non visible sur une seul page, il est nécéssaire de le visualiser en partie pour comprendre sa structure et sa contenance. 
La fonction [`head()`](http://www.rdocumentation.org/packages/utils/functions/head) permet de voir les cinq premiers lignes de la data frame.
La fonction [`tail()`](http://www.rdocumentation.org/packages/utils/functions/head) permet de voir les cinq derniers lignes de la data frame.
La fonction [`dim()`](http://www.rdocumentation.org/packages/base/functions/dim) permet de voir les dimensions de la data frame.


Dans cet exercice vous allez travailler avec le jeu de donné 'mcars' qui existe par defaut dans R.

*** =instructions
- Imprimer la première observation des données [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars).
- Utiliser la fonction [`tail()`](http://www.rdocumentation.org/packages/utils/functions/head) pour afficher les dernières observations.
- Afficher les dimensions du tableau [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars) avec la fonction [`dim()`](http://www.rdocumentation.org/packages/base/functions/dim).

*** =hint
Vous avez besoin de [`head()`](http://www.rdocumentation.org/packages/utils/functions/head) pour voir les premières observations de [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars).

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Imprimer les premières observations de mtcars


# Imprimer les dernières observations de mtcars


# Imprimer les dimensions de mtcars
```

*** =solution
```{r}
# Imprimer les premières observations de mtcars
head(mtcars)

# Imprimer les dernières observations de mtcars
tail(mtcars)

# Imprimer les dimensions de mtcars
dim(mtcars)
```

*** =sct
```{r}
test_error()
test_function("head", "x", incorrect_msg = "Avez-vous spécifier les bons paramétres dans la fonction [`head()`](http://www.rdocumentation.org/packages/utils/functions/head)? Assurez-vous de lui transmettre le jeu de données `mtcars`.")
test_function("tail", "x", incorrect_msg = "Avez-vous spécifier les bons paramétres dans la fonction [`tail()`](http://www.rdocumentation.org/packages/utils/functions/head) ? Assurez-vous de lui transmettre le jeu de données `mtcars`.")
test_output_contains("dim(mtcars)", incorrect_msg = "N'oublier pas la fonction [`dim()`](http://www.rdocumentation.org/packages/base/functions/dim)!")

success_msg("OK! vous avez maintenant une idée sur le jeu de données 'mcars'. taper 'mcars' dans la console pour afficher tous les données. Et passer à l'exercice suivant.")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:c8f389fdbd
## Consulter votre Data Frame (2)

Il existe d'autres fonctions qui peuvent donner un aperçu rapide sur les données.
- La fonction [`str()`](http://www.rdocumentation.org/packages/utils/functions/str) perme de voir la structure de 'mcars':

- The total number of observations (e.g. 32 car types)
- The total number of variables (e.g. 11 car features)
- A full list of the variables names (e.g. mpg, cyl ... )
- The data type of each variable (e.g. num for car features)
- The first observations

L'un des premiers réflexe à avoir quand vous avez un nouveau jeu de donnée est de voir sa structure avec la fonction [`str()`](http://www.rdocumentation.org/packages/utils/functions/str).

*** =instructions
Explorer la structure de [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars). 


*** =hint
Utiliser la fonction [`str()`](http://www.rdocumentation.org/packages/utils/functions/str) avec [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars) comme une "input"!

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Explorer la structure du jeu de données mtcars
```

*** =solution
```{r}
# Explorer la structure du jeu de données mtcars
str(mtcars)
```

*** =sct
```{r}
test_function("str","object",incorrect_msg = "Soyez sûr d'explorer les données `mtcars`.")
test_output_contains("str(mtcars)", incorrect_msg = "Soyez sûr d'utiliser la fonction [`str()`](http://www.rdocumentation.org/packages/utils/functions/str) sur `mtcars`.")
success_msg("Bon travail! Pouvez-vous trouver toutes les informations énumérées dans l'introduction de cet exercice? Continuez à l'exercice suivant.")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:f09c0189ac
## Créer une data frame (1)

Nous allons construire une data frame décrivants les propriétés de huit planètes solaires. Les variables sont les suivantes:

- Le type de la planète (terrestre ou gazuse)
- Le diamètre de la planète par rapport au diamètre de la Terre.
- La rotation de la planète à travers le soleil par rapport à celle de la Terre.
- Si la planète a des anneaux ou non (VRAI ou FAUX).

Après avoir fait des recherches sur [les planètes](http://en.wikipedia.org/wiki/Planet),créez les vecteurs nécéssaires : `planets`, `type`, `diameter`, `rotation` et `rings`. vous pouvez utiliser la fonction [`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame) pour créer la data frame?

*** =instructions
- Utiliser la fonction [`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame) pour construire `planets_df`.
- Assurez-vous que vous avez crée une  data frame avec 5 variables et 8 observations avec la focntion [`str()`](http://www.rdocumentation.org/packages/utils/functions/str).

*** =hint
La fonction [`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame)  prend en argument les vecteurs déjà définis pour vous. Les vecteurs doivent être séparés par des virgules. Ainsi, au niveau de la data frame, les vecteurs devienront des colonnes ayant l'ordre suivant: `planet`, `type`, `diameter`, `rotation` et `rings`.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Définition des vecteurs
planets <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# Créer la data frame: planets_df


# Disposer la structure de planets_df

```

*** =solution
```{r}
# Définition des vecteurs
planets <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# Créer la data frame: planets_df
planets_df <- data.frame(planets, type, diameter, rotation, rings)

# Disposer la structure de planets_df
str(planets_df)
```

*** =sct
```{r}
test_correct({
  test_object("planets_df",
              undefined_msg = "Soyez sûre de bien définir `planets_df`.",
              incorrect_msg = "Soyez sûr d'affecter correctement dans l'ordre les arguments de la fonction data.frame. L'ordre correcte est: planets, type, diameter, rotation and rings.")
}, {
  msg = "Ne changez rien à la définition du vecteur. Ajoutez seulement du code pour créer la data frame `planets_df`!"
  test_object("planets", undefined_msg = msg, incorrect_msg = msg)
  test_object("type", undefined_msg = msg, incorrect_msg = msg)
  test_object("diameter", undefined_msg = msg, incorrect_msg = msg)
  test_object("rotation", undefined_msg = msg, incorrect_msg = msg)
  test_object("rings", undefined_msg = msg, incorrect_msg = msg)
})

test_output_contains("str(planets_df)", incorrect_msg = "Ne pas oublier d'afficher la structure de `planets_df`!")

success_msg("Bon travail! ici les colonnes 'planets' et 'type' sont considérées comme des facteurs et non pas comme des caractères.)
```

--- type:NormalExercise lang:r xp:100 skills:1 key:7090dc3538
## Créer une data frame (2)

Dans l'exercice précédent, vous avez découvert que les deux colonnes `planets` et` type` de `planets_df` sont des facteurs. Pour la colonne `type`, cela a du sens, car un type de planète est une sorte de catégorie. Cependant, pour la colonne `planets` qui contient les noms des planètes, cela est moins logique.

Vous pouvez configurer l'argument `stringsAsFactors` dans [`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame) pour éviter que R convertit automatiquement les chaines de caractère en facteurs.

```
data.frame(vec1, vec2, ..., stringsAsFactors = FALSE)
```

*** =instructions
- Encoder le vecteur `type` comme un facteur, nommé `type_factor`.
- Utiliser `planets`, `type_factor`, `diameter`, `rotation` et `rings` pour construire `planets_df`. Cette fois, soyez sûre que les chaines de carcatères ne sont pas converties à un facteurs. Utilisez l'argument `stringsAsFactors = FALSE`.
- Afficher la structure de `planets_df` et vérifiez les types de variables.

*** =hint
Utiliser la fonction [`factor()`](http://www.rdocumentation.org/packages/base/functions/factor) pour coder `type`  à un facteur.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Définition des vecteurs
planets <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet",
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant","Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# Encoder le vecteur 'type' comme un facteur: type_factor


# Construire planets_df: chaîne de carcatère n'est pas convertie à un facteur!


# Afficher la structure de planets_df

```

*** =solution
```{r}
# Définition des vecteurs
planets <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# Encoder le vecteur 'type' comme un facteur: type_factor
type_factor <- factor(type)

# Construire planets_df: chaîne de carcatère n'est pas convertie à un facteur!
planets_df <- data.frame(planets, type_factor, diameter, rotation, rings, stringsAsFactors = FALSE)

# Afficher la structure de planets_df
str(planets_df)
```

*** =sct
```{r}
msg <- "Ne supprimez pas ou ne modifiez pas la définition de tous les vecteurs!"
test_object("planets", undefined_msg = msg, incorrect_msg = msg)
test_object("type", undefined_msg = msg, incorrect_msg = msg)
test_object("diameter", undefined_msg = msg, incorrect_msg = msg)
test_object("rotation", undefined_msg = msg, incorrect_msg = msg)
test_object("rings", undefined_msg = msg, incorrect_msg = msg)

test_object("type_factor", incorrect_msg = "Auriez-vous bien crée `type_factor`? Utilisez la fonction [`factor()`](http://www.rdocumentation.org/packages/base/functions/factor) sur `type`.")
test_object("planets_df", incorrect_msg = "Auriez-vous bien crée `planets_df`? Utilisez `type_factor` au lieu de `type` et configurez `stringsAsFactors` à `FALSE` dans [`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame).")
test_output_contains("str(planets_df)", incorrect_msg = "Ne pas oublier d'afficher la structure de `planets_df`.")

success_msg("Rendez-vous au prochain exercice.")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:a80ae7fbe8
## Renommer les colonnes d'une data frame

As a data frame is actually a list containing same-length vectors under the hood, it's possible to name and rename data frames just as you did with lists. To create a data frame and name it in one and the same call you can use:

```
data.frame(name1 = vec1, name2 = vec2, ...)
```

You can also name a data frame after creating it:

```
my_df <- data.frame(vec1, vec2, ...)
names(my_df) <- c("name1", "name2", ...)
```

Very proud of your first ever data frame, you show it to your friend Buzz. He's pretty impressed that you managed to include both factor and character columns, but he still finds the column names pretty odd. Time to make some improvements! The code that constructs the improved data frame, as you coded in the previous exercise, is already included.

*** =instructions
Rename the columns of `planets_df`. As `planets_df` is already created, you'll want to use the [`names()`](http://www.rdocumentation.org/packages/base/functions/names) function. 

- Name the `planets` column `name`.
- Name the `type_factor` column `type`.
- You can keep the names `diameter` and `rotation`.
- Change the name `rings` to `has_rings`.

Finally, print `planets_df` after you renamed it (not its structure!).

*** =hint
You'll need the vector containing `"name"`, `"type"`, `"diameter"`, `"rotation"` and `"has_rings"`.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Construct improved planets_df
planets <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)
type_factor <- factor(type)
planets_df <- data.frame(planets, type_factor, diameter, rotation, rings, stringsAsFactors = FALSE)

# Improve the names of planets_df


# Print planets_df

```

*** =solution
```{r}
# Construct improved planets_df
planets <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)
type_factor <- factor(type)
planets_df <- data.frame(planets, type_factor, diameter, rotation, rings, stringsAsFactors = FALSE)

# Improve the names of planets_df
names(planets_df) <- c("name", "type", "diameter", "rotation", "has_rings")

# Print planets_df
planets_df
```

*** =sct
```{r}

msg <- "Do not remove or change the definition of the predefined variables!"
test_object("planets", undefined_msg = msg, incorrect_msg = msg)
test_object("type", undefined_msg = msg, incorrect_msg = msg)
test_object("diameter", undefined_msg = msg, incorrect_msg = msg)
test_object("rotation", undefined_msg = msg, incorrect_msg = msg)
test_object("rings", undefined_msg = msg, incorrect_msg = msg)
test_object("type_factor", undefined_msg = msg, incorrect_msg = msg)
test_object("planets_df", undefined_msg = msg, incorrect_msg = "Don't change the contents of `planets_df`, only change the column names!")
test_object("planets_df", eq_condition = "equal",
            undefined_msg = msg, incorrect_msg = "Are you sure you have correctly renamed the columns of `planets_df`? The hint might be able to help you out.")

test_output_contains("planets_df", incorrect_msg = "Don't forget to print `planets_df`.")
success_msg("Nice one! This is going fast!")
```

--- type:VideoExercise lang:r xp:50 skills:1 key:9a2f941de8
## Subset, Extend & Sort Data Frames

*** =video_link
//player.vimeo.com/video/138174008

*** =video_hls
//videos.datacamp.com/transcoded/732_intro_to_r/v1/hls-ch6_2.master.m3u8


--- type:NormalExercise lang:r xp:100 skills:1 key:b6125af738
## Selection of data frame elements

Similar to matrices, you select elements from a data frame with the help of square brackets `[ ]`. By using a comma, you can indicate what to select from the rows and the columns respectively:

```
# first row, second column
my_df[1,2]

# rows 1 to 3, columns 2 to 4
my_df[1:3,2:4]

# Entire first row
my_df[1, ]

# rows 1 to 3 of "type" column
planets_df[1:3,2]
planets_df[1:3,"type"]
```

Let us now apply this technique on `planets_df`! This data frame is already available in the workspace.

*** =instructions
- Select the type of Mars; store the factor in `mars_type`.
- Store the entire rotation column in `rotation` as a vector.
- Create a data frame, `closest_planets_df`, that contains all data on the first three planets.
- Likewise, build the data frame `furthest_planets_df` that contains all data on the last three planets.

*** =hint
`planets_df[1:3,]` will select all elements of the first three rows.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/introduction_to_r/chapter6.RData"))
```

*** =sample_code
```{r}
# planets_df is pre-loaded

# The type of Mars: mars_type


# Entire rotation column: rotation


# First three planets: closest_planets_df


# Last three planets: furthest_planets_df


```

*** =solution
```{r}
# planets_df is pre-loaded

# The type of Mars: mars_type
mars_type <- planets_df[4, 2]

# Entire rotation column: rotation
rotation <- planets_df[ ,4]

# First three planets: closest_planets_df
closest_planets_df <- planets_df[1:3, ]

# Last three planets: furthest_planets_df
furthest_planets_df <- planets_df[6:8, ]
```

*** =sct
```{r}

msg <- "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)

test_object("mars_type", 
            incorrect_msg = "Are you sure you correctly selected the type of Mars?")
test_object("rotation", 
            incorrect_msg = "Have another look at the command to define `rotation`. You'll want to select the fourth column.")
test_object("closest_planets_df", 
            incorrect_msg = "Did you select the first three rows of `planets_df` to create `closest_planets_df`?")
test_object("furthest_planets_df",
            incorrect_msg = "Make sure that you select the last three rows of `planets_df` to build `furthest_planets_df`.")

success_msg("Great! Feel free to have a look at the variables you've just created. Apart from selecting elements from your data frame by index, you can also use the column names.")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:7aa0a94261
## Only planets with rings (1)

You will often want to select an entire column, namely one specific variable from a data frame. If you want to select the column `diameter` from `planets_df`, you can use either on of the following:

```
planets_df[, 3]
planets_df[, "diameter"]
planets_df$diameter
```

*** =instructions
- Make use of the `$` sign to create the variable `rings_vector` that contains the entire `has_rings` column in the `planets_df` data frame.
- Print the `rings_vector`; it should be a vector.

*** =hint
`my_df$col_name` is the most convenient way to select a column from a data frame. In this case, the data frame is `planets_df` and the variable is `has_rings`.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/introduction_to_r/chapter6.RData"))
```

*** =sample_code
```{r}
# planets_df is pre-loaded in your workspace

# Create rings_vector


# Print rings_vector

```

*** =solution
```{r}
# planets_df is pre-loaded in your workspace

# Create rings_vector
rings_vector <- planets_df$has_rings

# Print rings_vector
rings_vector
```

*** =sct
```{r}
msg <- "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)

test_object("rings_vector", incorrect_msg = "It looks like `rings_vector` does not contain all the elements of the `has_rings` variable of`planets_df`.")

test_output_contains("rings_vector", incorrect_msg = "Don't forget to print `rings_vector`!")

success_msg("Great! Continue to the next exercise and discover yet another way of subsetting!")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:d6245c1bb1
## Only planets with rings (2)

You probably remember from high school that some planets in our solar system have rings and others do not. But due to other priorities at that time (read: puberty) you can not recall their names, let alone their rotation speed, etc. Could R help you out?

The `rings_vector` you've coded before is a logical vector. It's `TRUE` when the corresponding planets have rings and `FALSE` when they don't. To select those observations from `planets_df` that have rings, you can use the `rings_vector` and perform subsetting by logicals!

To subset observations by logicals, put the logical vector and a comma inside square brackets, similar to this:

```
df[,logical_vector]
```

*** =instructions
- Assign to `planets_with_rings_df` all data in the `planets_df` data set for the planets with rings, that is, where `rings_vector` is `TRUE`.
- Print `planets_with_rings_df`.

*** =hint
Select elements from `planets_df` by using the square brackets. The `rings_vector` contains boolean values and R will select only those rows/columns were the vector element is `TRUE`. In this case, you want to select rows based on `rings_vector` and select all the columns.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/introduction_to_r/chapter6.RData"))
```

*** =sample_code
```{r}
# planets_df pre-loaded in your workspace

# Create rings_vector
rings_vector <- planets_df$has_rings

# Select the information on planets with rings: planets_with_rings_df


# Print planets_with_rings_df
```

*** =solution
```{r}
# planets_df pre-loaded in your workspace

# Create rings_vector
rings_vector <- planets_df$has_rings

# Select the information on planets with rings: planets_with_rings_df
planets_with_rings_df <- planets_df[rings_vector,]

# Print planets_with_rings_df
planets_with_rings_df
```

*** =sct
```{r}

msg <- "Do not remove or overwrite `planets_df` or `rings_vector`!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_object("rings_vector", undefined_msg = msg, incorrect_msg = msg)

test_object("planets_with_rings_df",
            incorrect_msg = "It looks like `planets_with_rings_df` does not contain all the data of the planets with rings. Make sure to not specify any column selector, to keep all columns.")

test_output_contains("planets_with_rings_df",
                     incorrect_msg = "Don't forget to print `planets_with_rings_df`!")
success_msg("Nice work, but this is a rather tedious solution. The next exercise will teach you how to do it in a more concise way.")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:c1a08e245c
## Only planets with rings but shorter

So what exactly did you learn in the previous exercises? You selected a subset from a data frame (`planets_df`) based on whether or not a certain condition was true (rings or no rings), and you managed to pull out all relevant data. Pretty awesome! By now, NASA is probably already flirting with your CV!

Instead of having to define a vector `rings_vector`, which you then use to subset `planets_df`, you could've also used either one of these:

```
planets_df[planets_df$has_rings, ]
planets_df[planets_df$has_rings == TRUE, ]
```

*** =instructions
- Create a data frame `small_planets_df` with planets that have a diameter smaller than the Earth. This means that the `diameter` variable should be smaller than 1, since diameter is a relative measure of the planet's diameter in relation to planet Earth.
- Build another data frame, `slow_planets_df`, with the observations that have a longer rotation period than Earth. This means that the absolute value (use the function [`abs()`](http://www.rdocumentation.org/packages/base/functions/MathFun)) of the `rotation` variable should be greater than 1.

*** =hint
Make use of the logical operators `>` and `<`. Use the [`abs()`](http://www.rdocumentation.org/packages/base/functions/MathFun) function for absolute values. 

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/introduction_to_r/chapter6.RData"))
```

*** =sample_code
```{r}
# planets_df is pre-loaded in your workspace

# Planets that are smaller than planet Earth: small_planets_df
 # option 1
 
 # option 2


# Planets that rotate slower than planet Earth: slow_planets_df
 # option 1
 
 # option 2
```

*** =solution
```{r}
# planets_df is pre-loaded in your workspace

# Planets that are smaller than planet Earth: small_planets_df
# option 1
small_planets_df <- planets_df[planets_df$diameter < 1, ] 
# option 2
small_planets_df  <- subset(planets_df, subset = diameter < 1)  

# Planets that rotate slower than planet Earth: slow_planets_df
# option 1
slow_planets_df <- planets_df[abs(planets_df$rotation) > 1, ]
# option 2
slow_planets_df <- subset(planets_df, subset = abs(rotation) > 1) 
```

*** =sct
```{r}

msg <- "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)

test_object("small_planets_df",
            incorrect_msg = "It looks like `small_planets_df` does not contain the correct subset of `planets_df`.")

test_object("slow_planets_df",
            incorrect_msg = "It looks like `slow_planets_df` does not contains the correct subset of `planets_df`. Make sure to use the [`abs()`](http://www.rdocumentation.org/packages/base/functions/MathFun) function for absolute values.")

success_msg("Great! Not only is the [`subset()`](http://www.rdocumentation.org/packages/base/functions/subset) function more concise, it is probably also more understandable for people who read your code. Continue to the next exercise.")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:e9ca3eeb99
## Add variable/column

There are many cases in which you'll want to add more variables to your data frame. This comes down to adding a column to the data frame. The exact same techniques to select columns from a data frame can be used here. To add a column `new_column` to `my_df`, with data from `my_vec`, you can use one of the following calls:

```
my_df$new_column <- my_vec
my_df[["new_column"]] <- my_vec
my_df <- cbind(my_df, new_column = my_vec)
```

You've browsed [Wikipedia](https://en.wikipedia.org/wiki/Planet) and also decide to add a column that lists the number of moons each of the planets has. Also the planets' masses can be a cool addition. The `moon` and `masses` vectors are already included in the workspace; up to you to add them to `planets_df`.

*** =instructions
- Add `moons` to `planets_df` under the variable name "moon".
- In a similar fashion, add `masses` under the variable name `"mass"`.

*** =hint
To add a new column called "moon", you can use: `planets_df$moon <- moons`.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/introduction_to_r/chapter6.RData"))
```

*** =sample_code
```{r}
# planets_df is already pre-loaded in your workspace

# Definition of moons and masses
moons <- c(0, 0, 1, 2, 67, 62, 27, 14)
masses <- c(0.06, 0.82, 1.00, 0.11, 317.8, 95.2, 14.6, 17.2)

# Add moons to planets_df under the name "moon"


# Add masses to planets_df under the name "mass"

```

*** =solution
```{r}
# planets_df is already pre-loaded in your workspace

# Definition of moons and masses
moons <- c(0, 0, 1, 2, 67, 62, 27, 14)
masses <- c(0.06, 0.82, 1.00, 0.11, 317.8, 95.2, 14.6, 17.2)

# Add moons to planets_df under the name "moon"
planets_df$moon <- moons

# Add masses to planets_df under the name "mass"
planets_df$mass <- masses
```

*** =sct
```{r}

undef_msg <- "Do not remove `planets_df`!"
msg <- "Do not change anything about the columns that were already in `planets_df`; you should only <i>add</i> columns."
test_data_frame(name = "planets_df", 
                columns = c("name", "type", "diameter", "rotation", "has_rings"),
                undefined_msg = undef_msg, undefined_cols_msg = msg, incorrect_msg = msg)

test_data_frame(name = "planets_df",
                columns = "moon",
                undefined_cols_msg = "Make sure to name the column to contain the moon information \"moon\".",
                incorrect_msg = "The \"moon\" column does not contain the correct information. Try again.")

test_data_frame(name = "planets_df",
                columns = "mass",
                undefined_cols_msg = "Make sure to name the column to contain the mass information \"mass\".",
                incorrect_msg = "The \"mass\" column does not contain the correct information. Try again.")

test_object("planets_df", incorrect_msg = "It appears that you have correctly specified the \"moon\" and \"mass\" columns, but there's still something wrong with the resulting `planets_df`. Make sure to add columns twice!")
success_msg("Nice one! This data frame is beginning to contain quite some information!")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:8e5ade7078
## Sorting

In data analysis you will often sort your data according to a certain variable in the data set. In R, this is done with the help of the function [`order()`](http://www.rdocumentation.org/packages/base/functions/order). 

[`order()`](http://www.rdocumentation.org/packages/base/functions/order) is a function that gives you the ranked position of each element when it is applied on a variable, such as a vector for example:

```
a <- c(100,9,101)
order(a)
``` 

this code returns the vector containing 2, 1 and 3; that's because 100 is the second largest element of the vector, 9 is the smallest element and 101 is the largest element.
    
```
a[order(a)]
```

will thus give you the ordered vector (9, 100, 101), since it first picks the second element of `a`, then the first and then the last. Got it? If you are not sure, use the console to play with the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function. 

*** =instructions
Experiment with the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function in the console. Click 'Submit Answer' when you are ready to continue.

*** =hint
Just play with the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function in the console!

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Just play around with the order function in the console to see how it works!
# Some examples:
```

*** =solution
```{r}
# Just play around with the order function in the console to see how it works!
# Some examples:
order(1:10)
order(2:11)
order(c(5,4,6,7))
```

*** =sct
```{r}
success_msg("Great! Now let's use the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function to sort your data frame!")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:ec87541ef1
## Sorting your data frame

Alright, now let us do something useful with the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function! You would like to rearrange your data frame such that it starts with the smallest planet and ends with the largest one. A sort on the `diameter` column, if you will.

Suppose you have a data frame `df`, with three columns `a`, `b` and `c`. The following code will print a version of df that is sorted on the column `a`.

```
pos <- order(df$a)
df[pos, ]
```

*** =instructions
- Assign to the variable `positions` the desired ordering for the new data frame that you will create in the next step. You can use the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function for that.
- Now create the data frame `smallest_first_df`, which contains the same information as `planets_df`, but with the planets in increasing order of magnitude. Use the previously created variable `positions` as row indices inside square brackets to achieve this.
- Print `smallest_first_df` to see what you've accomplished.

*** =hint
- `order(planets_df$diameter)` will give you the ordering of the variable diameter from smallest to largest. This is what you should assign to `positions`.
- Use the variable positions then to select from the data frame `planets_df`: `planets_df[positions, ]`.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/introduction_to_r/chapter6.RData"))
```

*** =sample_code
```{r}
# planets_df is pre-loaded in your workspace

# Create a desired ordering for planets_df: positions


# Create a new, ordered data frame: smallest_first_df


# Print smallest_first_df
```

*** =solution
```{r}
# planets_df is pre-loaded in your workspace

# Create a desired ordering for planets_df: positions
positions <- order(planets_df$diameter)

# Create a new, ordered data frame: smallest_first_df
smallest_first_df <- planets_df[positions, ]

# Print smallest_first_df
smallest_first_df
```

*** =sct
```{r}
msg = "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_object("positions",
            incorrect_msg = "It looks like `positions` does not contain all the correct ordering of the diameter column.")
test_object("smallest_first_df",
            incorrect_msg = "It looks like `smallest_first_df` does not contain the positions of the ordered `planets_df`.")
test_output_contains("smallest_first_df", incorrect_msg = "Finish off by printing `smallest_first_df`.")
success_msg("Wonderful! What does the resulting data frame look like? Order prevailed!")
```

